name: integration-sheets_circle
#execution
on:
  push:
    branches:
      - master  # Substitua "main" pelo nome da sua branch principal, se for diferente

  schedule:
    - cron: '0 5 * * *'  # Agendado para executar todos os dias às 2 da manhã

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write


    steps:
    - name: Checkout do Repositório
      uses: actions/checkout@v2

    - uses: actions/labeler@v4
      with:
        repo-token: ${{ secrets.GITHUB_TOKEN }}

    - name: Configuração do Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.11.3'  # Especifique a versão do Python que você está usando

    - name: Instalação das Dependências
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt 
      #teste
    - name: Debug
      run: |
        echo "PLATFORM_CLIENT_ID: $PLATFORM_CLIENT_ID"
        echo "PLATFORM_CLIENT_SECRET: $PLATFORM_CLIENT_SECRET"
        echo "PLATFORM_PASSWORD: $PLATFORM_PASSWORD"
        echo "PLATFORM_USERNAME: $PLATFORM_USERNAME"
        echo "SHEET_ID: $SHEET_ID"
        echo "CRED_JSON: $CRED_JSON"
        
    - name: Execução do Script
      run: python -m cs_integration
      env:
        PLATFORM-CLIENT-ID: ${{ secrets.PLATFORM_CLIENT_ID }}
        PLATFORM-CLIENT-SECRET: ${{ secrets.PLATFORM_CLIENT_SECRET }}
        PLATFORM-PASSWORD: ${{ secrets.PLATFORM_PASSWORD }}
        PLATFORM-USERNAME: ${{ secrets.PLATFORM_USERNAME }}
        SHEET_ID: ${{ secrets.SHEET_ID}}
        CREDENTIAL: ${{ secrets.CRED_JSON}}
        
