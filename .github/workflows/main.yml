name: integration-sheets_circle
#execution
on:
  push:
    branches:
      - master  # Substitua "main" pelo nome da sua branch principal, se for diferente

  schedule:
    - cron: '0 5 * * *'  # Agendado para executar todos os dias às 2 da manhã

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write


    steps:
    - name: Checkout do Repositório
      uses: actions/checkout@v2

    - name: Configuração do Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.11.3'  # Especifique a versão do Python que você está usando

    - name: Listar Conteúdo do Diretório
      run: ls -la

    - name: Instalação das Dependências
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt 
      #teste
      env:
        PLATFORM-CLIENT-ID: ${{ env.PLATFORM-CLIENT-ID }}
        PLATFORM-CLIENT-SECRET: ${{ env.PLATFORM-CLIENT-SECRET }}
        PLATFORM-PASSWORD: ${{ env.PLATFORM-PASSWORD }}
        PLATFORM-USERNAME: ${{ env.PLATFORM-USERNAME }}
        SHEET_ID: ${{ env.SHEET_ID}}
        CREDENTIAL: ${{ env.CREDENTIAL}}
    - name: Debug
      run: |
        echo "PLATFORM_CLIENT_ID: $env.PLATFORM-CLIENT-ID"
        echo "PLATFORM_CLIENT_SECRET: $env.PLATFORM-CLIENT-SECRET"
        echo "PLATFORM_PASSWORD: $env.PLATFORM-PASSWORD"
        echo "PLATFORM_USERNAME: $env.PLATFORM-USERNAME"
        echo "SHEET_ID: $env.SHEET_ID"
        echo "CRED_JSON: $env.CRED_JSON"

    - name: Execução do Script
      run: python -m cs_integration

        
